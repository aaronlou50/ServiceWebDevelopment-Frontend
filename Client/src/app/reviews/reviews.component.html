<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <h1 class="text-center">Write a Review</h1>
      <form (ngSubmit)="onSubmit(reviewForm)" #reviewForm="ngForm">
        <div class="form-group">
          <label for="name">Author:</label>
          <input type="text" id="name" name="name" ngModel required class="form-control">
        </div>
        <div class="form-group">
          <label for="comments">Comments:</label>
          <textarea id="comments" name="comments" ngModel required class="form-control"></textarea>
        </div>
        <div class="form-group">
          <label for="rating">Rating:</label>
          <select id="rating" name="rating" ngModel required class="form-control">
            <option value="1">1 stars</option>
            <option value="2">2 stars</option>
            <option value="3">3 stars</option>
            <option value="4">4 stars</option>
            <option value="5">5 stars</option>
          </select>
        </div>
        <button type="submit" class="btn btn-outline-primary">Submit Review</button>
        <button type="button" (click)="onRead()" class="btn btn-outline-secondary">Read</button>
      </form>

      <div *ngIf="reviews.length > 0">
        <div class="container">
          <h2 class="text-center">All Reviews</h2>
        </div>
        <div *ngFor="let review of reviews">
          <p>Name: {{ review.author }}</p>
          <p>Rating: {{ review.title }}</p>
          <p>Comments: {{ review.content }}</p>
          <p>Date: {{ review.date | date }}</p>

          <!-- Show update and delete buttons -->
          <div *ngIf="selectedReview !== review">
            <button (click)="onUpdate(review)" class="btn btn-outline-warning">Update</button>
            <button (click)="onDelete(review)" class="btn btn-outline-danger">Delete Review</button>
          </div>
          <div *ngIf="selectedReview === review">
            <h2 class="text-center">Update Review</h2>
            <form (ngSubmit)="updateReview(selectedReview)" #updateForm="ngForm">
              <div class="form-group">
                <label for="updateName">Author:</label>
                <input type="text" id="updateName" name="updateName" [(ngModel)]="selectedReview.author" required class="form-control">
              </div>
              <div class="form-group">
                <label for="updateComments">Comments:</label>
                <textarea id="updateComments" name="updateComments" [(ngModel)]="selectedReview.content" required class="form-control"></textarea>
              </div>
              <div class="form-group">
                <label for="updateRating">Rating:</label>
                <select id="updateRating" name="updateRating" [(ngModel)]="selectedReview.title" required class="form-control">
                  <option value="Rating: 1">1 stars</option>
                  <option value="Rating: 2">2 stars</option>
                  <option value="Rating: 3">3 stars</option>
                  <option value="Rating: 4">4 stars</option>
                  <option value="Rating: 5">5 stars</option>
                </select>
              </div>
              <button type="submit" class="btn btn-outline-primary">Update Review</button>
              <button type="button" (click)="cancelUpdate()" class="btn btn-outline-secondary">Cancel</button>
            </form>
          </div>
          </div>
        </div>
      </div>
    </div>
  </div>
